import{a as M}from"./chunk-M7WSOGRV.js";import{$ as C,C as E,D as r,H as _,J as q,M as v,N as d,O as p,P as z,Q as x,R as h,S as c,T as n,U as i,V as D,W as T,X as m,Y as k,Z as a,_ as u,aa as G,ba as w,ca as I,da as L,ga as H,ha as y,ia as F,ja as J,ma as K,na as Q,oa as g,q as f,qa as W,s as S,t as P,va as N,wa as O,y as A,z as j}from"./chunk-L54XGTR7.js";var B=class t{transform(o){return o.length!==13?o:[o.slice(0,3),o.slice(3,4),o.slice(4,8),o.slice(8,12),o.slice(12)].join("-")}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=q({name:"isbnFormat",type:t,pure:!0})};var Z=t=>["details",t];function ee(t,o){if(t&1&&(n(0,"p",3),a(1),i()),t&2){k();let e=L(0);r(),u(e.subtitle)}}var R=class t{book=g.required();like=Q();likeBook(){this.like.emit(this.book())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-book-card"]],inputs:{book:[1,"book"]},outputs:{like:"like"},decls:15,vars:12,consts:[[1,"book-card"],["alt","Buchcover",3,"src","aria-describedby"],[3,"id"],["role","doc-subtitle"],[3,"routerLink"],["type","button",1,"secondary",3,"click"]],template:function(e,l){if(e&1&&(w(0),n(1,"article",0),D(2,"img",1),n(3,"header")(4,"h2",2),a(5),i()(),n(6,"div"),d(7,ee,2,1,"p",3),a(8),y(9,"isbnFormat"),i(),n(10,"footer")(11,"a",4),a(12,"Details"),i(),n(13,"button",5),m("click",function(){return l.likeBook()}),a(14,"Like"),i()()()),e&2){let s=I(l.book()),b=`title-${s.isbn}`;r(2),c("src",s.imageUrl,E),v("aria-describedby",b),r(2),c("id",b),r(),u(s.title),r(2),p(s.subtitle?7:-1),r(),C(" ISBN: ",F(9,8,s.isbn)," "),r(3),c("routerLink",H(10,Z,s.isbn))}},dependencies:[O,B],encapsulation:2})};var Y=(t,o)=>o.isbn;function te(t,o){if(t&1&&(n(0,"li"),a(1),i()),t&2){let e=o.$implicit;r(),G("",e.title," (",e.isbn,")")}}function ie(t,o){t&1&&(n(0,"li"),a(1,"No books liked."),i())}function oe(t,o){if(t&1){let e=T();n(0,"app-book-card",4),m("like",function(s){S(e);let b=k(2);return P(b.addLikedBook(s))}),i()}if(t&2){let e=o.$implicit;c("book",e)}}function ne(t,o){if(t&1&&x(0,oe,1,1,"app-book-card",3,Y),t&2){let e=k();h(e.books.value())}}var V=class t{#e=f(M);#t=f(N);search=g();searchTerm=K(()=>this.search()||"");books=this.#e.getAll(()=>this.searchTerm());likedBooks=A([]);constructor(){j(()=>{this.#t.navigate([],{queryParams:{search:this.searchTerm()||null}})})}addLikedBook(o){this.likedBooks().find(l=>l.isbn===o.isbn)||this.likedBooks.update(l=>[...l,o])}clearLikedBooks(){this.likedBooks.set([])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-books-overview-page"]],inputs:{search:[1,"search"]},decls:17,vars:4,consts:[["type","button",3,"click"],["type","button",3,"click","aria-busy"],["type","search","placeholder","Search","aria-label","Search",3,"input","value"],[3,"book"],[3,"like","book"]],template:function(e,l){e&1&&(n(0,"section")(1,"h1"),a(2,"Favorite Books"),i(),n(3,"button",0),m("click",function(){return l.clearLikedBooks()}),a(4," Clear "),i(),n(5,"ul"),x(6,te,2,2,"li",null,Y,!1,ie,2,0,"li"),i()(),n(9,"section")(10,"h1"),a(11,"Books"),i(),n(12,"button",1),m("click",function(){return l.books.reload()}),a(13," Reload "),i(),n(14,"div")(15,"input",2),m("input",function(b){return l.searchTerm.set(b.target.value)}),i(),d(16,ne,2,0),i()()),e&2&&(r(6),h(l.likedBooks()),r(6),v("aria-busy",l.books.isLoading()),r(3),c("value",l.searchTerm()),r(),p(l.books.hasValue()?16:-1))},dependencies:[R],encapsulation:2})};function ae(t,o){t&1&&(n(0,"p",1),a(1,"Book could not be found."),i(),n(2,"a",2),a(3,"Back to list"),i())}function re(t,o){t&1&&(n(0,"p",0),a(1,"Loading ..."),i())}function le(t,o){if(t&1&&(n(0,"p",4),a(1),i()),t&2){k();let e=L(0);r(),u(e.subtitle)}}function se(t,o){if(t&1&&(n(0,"li"),a(1),i()),t&2){let e=o.$implicit;r(),u(e)}}function ce(t,o){if(t&1){let e=T();w(0),n(1,"article")(2,"header")(3,"h1",3),a(4),i(),d(5,le,2,1,"p",4),n(6,"div",5)(7,"div")(8,"h2"),a(9,"Authors"),i(),n(10,"ul"),x(11,se,2,1,"li",null,z),i()(),n(13,"div")(14,"h2"),a(15,"ISBN"),i(),a(16),y(17,"isbnFormat"),i(),n(18,"div")(19,"h2"),a(20,"Created at"),i(),a(21),y(22,"date"),i()()(),n(23,"p"),a(24),i(),D(25,"img",6),n(26,"footer")(27,"a",2),a(28,"Back to list"),i(),n(29,"a",7),a(30,"Angular Book"),i(),n(31,"button",8),m("click",function(){S(e);let s=k();return P(s.removeBook())}),a(32," Delete book "),i()()()}if(t&2){let e=I(k().book.value()),l=`title-${e.isbn}`;r(3),c("id",l),r(),u(e.title),r(),p(e.subtitle?5:-1),r(6),h(e.authors),r(5),C(" ",F(17,9,e.isbn)," "),r(5),C(" ",J(22,11,e.createdAt,"medium")," "),r(3),u(e.description),r(),c("src",e.imageUrl,E),v("aria-describedby",l)}}var $=class t{#e=f(M);#t=f(N);isbn=g.required();book=this.#e.getSingle(()=>this.isbn());removeBook(){confirm("Delete book?")&&this.#e.remove(this.isbn()).subscribe(()=>{this.#t.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-book-details-page"]],inputs:{isbn:[1,"isbn"]},decls:3,vars:3,consts:[["aria-busy","true"],["role","alert"],["routerLink","/books"],[3,"id"],["role","doc-subtitle"],[1,"grid"],["alt","Buchcover",3,"src","aria-describedby"],["routerLink","/books/details/9783988890641"],["type","button",3,"click"]],template:function(e,l){e&1&&(d(0,ae,4,0),d(1,re,2,0,"p",0),d(2,ce,33,14,"article")),e&2&&(p(l.book.error()?0:-1),r(),p(l.book.isLoading()?1:-1),r(),p(l.book.hasValue()?2:-1))},dependencies:[O,W,B],encapsulation:2})};var Ie=[{path:"",component:V,title:"Books"},{path:"details/:isbn",component:$,title:"Book Details"}];export{Ie as booksPortalRoutes};
